<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Bounce Experiment</title>
  <link rel="stylesheet" href="style.css">
  <script src="script.js" defer></script> <!-- Link to JavaScript for interactivity -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="timer-steps.js"></script>
</head>
<body class="experiment-bg">
  <!-- Start Button at the Top -->
  <header>
    <nav>
      <a href="index.html">Home</a>
      <a href="usefullinks.html">Useful Links</a>
      <a href="experiment.html">Experiment</a>
      <a href="contact.html">Contact</a>
    </nav>
  </header>
  <main>
    <section class="experiment-section" id="introduction">
      <h2>Introduction</h2>
      <p>Hi Team, we need to work out what inflation does to the ball, and to help our players find a good amount of inflation for the big game.</p>
      <img src="footballKick.jpg" alt="Introduction Image" class="kick-img" />
      <h3>Experiment Outline</h3>
      <iframe src="https://www.youtube.com/embed/aFSdq4it8xg" title="Experiment Outline Video" allowfullscreen></iframe>
      <button onclick="toggleDropdown('script-intro')">Show Script</button>
      <div id="script-intro" class="dropdown-content" style="display: none;">
        <p>Hi Team, great to see you here. We have a problem, and I need your help investigating the solution. 
          The league is introducing a new type of football, and our players have been reporting that the inflation of their football is changing the way that they play. We need to work out what inflation does to the ball, and to help our players find a good amount of inflation for the big game. 

        In the home changing rooms you should find some balls that have been inflated, can you test which of them have the best bounce? 
        We also want to know if we can help our players out by playing on the astroturf or on a harder surface, can you investigate if this makes a difference?

        The drill for this experiment is, hold the ball out at chest level, drop it and count the number of bounces. 
        We’re looking for clean data, so throwing it at the ground is going to make it hard to see if we’re measuring the strength of your arms or the bounciness of the ball.
        We’re going for 5 reps of this drill on each of the inflated balls. Hold the ball out at chest level, drop it and count the number of bounces.

        The drill is going to require some teamwork. Someone to drop the ball, some team members to count the number of bounces and someone to write down the score. 
        Your class is going to work together with some of you bouncing the ball onto the changing room floor and some bouncing it on the astroturf.</p>
      </div>
      <p>Follow the steps below to conduct the experiment.</p>
    </section>

    <section class="experiment-section" id="active-experiment">
      <h2>Active Experiment</h2>
      <p>We’re going to do this drill 5 times. Our average will be the most common number of bounces. Circle which ball and surface you are using. Remember to write your scores down.</p>
      <img src="instruction.png" alt="Instruction Image" class="instruction-img" />
      <!-- Data Table -->
        <h3>Data Table</h3>
        <table id="data-table">
            <thead>
                <tr>
                    <th>Football Inflation</th>
                    <th>Surface</th>
                    <th>Number of Bounces</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <tr>
                  <td>
                    <select class="pressure-input">
                      <option value="A">A: Soft</option>
                      <option value="B">B: Hard</option>
                    </select>
                  </td>
                  <td>
                    <select class="surface-input">
                      <option value="Hard Floor">Hard Floor</option>
                      <option value="Astroturf">Astroturf</option>
                      <option value="Grass">Grass</option>
                      <option value="Carpet">Carpet</option>
                      <option value="Concrete">Concrete</option>
                    </select>
                  </td>
                  <td><input type="number" class="bounces-input" placeholder="Enter bounces"></td>
                  <td><button type="button" class="delete-row-btn" onclick="deleteRow(this)" title="Delete row">&times;</button></td>
                </tr>
                <!-- Add more rows as needed -->
            </tbody>
        </table>
        <button onclick="addRow()">Add Row</button>
        <button onclick="updateGraph()">Update Graph</button>
    </section>

    <section class="experiment-section" id="graph-plotting">
      <h2>Graph Plotting</h2>
      <!-- Graph -->
        <h3>Graph</h3>
        <canvas id="graphCanvas" width="600" height="400"></canvas>
    </section>

    <!-- Conclusions Questions Section -->
    <section class="experiment-section" id="discussion">
      <h2>Questions</h2>
      <img src="wordcloud.png" alt="Wordcloud" class="wordcloud-img" />
      <div>
        <p>Explain how the inflation of the ball effects the number of bounces? Can you predict which ball would be best to score a penalty with? Explain your answer.</p>
        <button onclick="toggleDropdown('answer1')">Show Answer</button>
        <div id="answer1" class="dropdown-content" style="display: none;">
          <p>We found that the less air a ball has inside it, the fewer times it bounces. 
            This is because a ball with less air is softer and changes shape more easily, which means it loses more energy when it hits the ground.
            We also noticed that there’s a big difference in how the ball bounces when it goes from no air to some air. 
            But when you go from a medium amount of air to a lot of air, the difference in bounces isn’t as big.
            If you were trying to score a penalty, the best ball to use would be the one with the most air in it. 
            This is because a harder ball doesn’t change shape as much, so more of the energy from your kick goes into making the ball move forward instead of being lost.</p>
        </div>
      </div>
      <div>
        <p>Sketch what happens to the ball when it hits the ground. Why do you think this happens?</p>
        <button onclick="toggleDropdown('answer2')">Show Answer</button>
        <div id="answer2" class="dropdown-content" style="display: none;">
          <img src="BouncingPhysics.svg" alt="Diagram describing the motion of the bouncing ball." style="max-width: 100%; height: auto;">
        </div>
      </div>
      <div>
        <p>Why do you think the surface changes how much the ball bounces? What surface do you think the team should play on?</p>
        <button onclick="toggleDropdown('answer3')">Show Answer</button>
        <div id="answer3" class="dropdown-content" style="display: none;">
          <p>The surface changes how much the ball bounces because a softer surface absorbs more energy from the ball when it hits the ground. 
            This means that less energy is available to make the ball bounce back up. 
            The team should play on a harder surface, like the changing room floor, because it will give the ball more bounce and help them score more goals.</p>
        </div>
      </div>
      </div>
    </section>

    <!-- Conclusions Section -->
    <section class="experiment-section" id="conclusions">
      <h2>Theory and Conclusions</h2>
      <iframe src="https://www.youtube.com/embed/example-conclusion-video" title="Conclusions Video" allowfullscreen></iframe>
      <button onclick="toggleDropdown('script-conclusion')">Show Script</button>
      <div id="script-conclusion" class="dropdown-content" style="display: none;">
        <p>Look, the team left everything out there today. They worked incredibly hard to gather this data, and in the end, that effort really paid off. 
            What we’ve found is that there’s definitely a relationship between the ball’s pressure and how many times it bounces. On top of that, the surface it hits also plays a huge role in how the ball behaves.

          Think of it like this: when we drop the ball onto a hard surface, it starts with gravitational potential energy – just from being held up. 
          As soon as you let it go, gravity takes over, and that energy shifts to kinetic energy because the ball is now moving.

          Then, you’ve got the first impact. The ball hits the ground and deforms slightly – that’s where we see some of that kinetic energy converting into elastic potential energy. 
          The ball compresses, wants to snap back to shape, and that’s when the rebound happens. Not all of the energy makes it into that bounce though – some of it is lost as sound (which we hear), some as heat, and some goes into permanently deforming the ball – which is why, over time, balls wear out.

          Now as the ball comes back up, it's working against gravity again, and eventually it’ll come back down for another bounce. 
          But it won’t bounce forever – energy losses to heat, sound, and deformation mean each bounce is a little lower.

          When you switch to a softer surface, the story changes. 
          The ground deforms as well, meaning more energy is absorbed, and the ball doesn’t bounce as much. 
          Same goes for a ball with lower pressure – it deforms more easily, so again, fewer bounces.

          It’s a great insight for the squad – not just about physics, but about the importance of pressure and conditions. 
          We’ll definitely be taking this into account moving forward.</p>
      </div>
    </section>

  </main>
  <footer>
    <div class="footer-logos">
      <img src="futuresLogo.png" alt="Bristol Futures Logo" class="footer-logo">
      <img src="uobLogo.svg" alt="University of Bristol Logo" class="footer-logo">
      <img src="robinsFoundationLogo.png" alt="Robins Foundation Logo" class="footer-logo">
    </div>
    <p>2025 University of Bristol for Bristol Futures</p>
  </footer>

<script>
  // Make functions globally accessible
  window.toggleDropdown = function(id) {
    const element = document.getElementById(id);
    if (element) {
      element.style.display = (element.style.display === 'none' || element.style.display === '') ? 'block' : 'none';
    }
  };

  window.addRow = function() {
    const tableBody = document.querySelector('#data-table tbody');
    const newRow = document.createElement('tr');
    newRow.innerHTML = `
      <td>
        <select class="pressure-input">
          <option value="A">A: Soft</option>
          <option value="B">B: Hard</option>
        </select>
      </td>
      <td>
        <select class="surface-input">
          <option value="Hard Floor">Hard Floor</option>
          <option value="Astroturf">Astroturf</option>
          <option value="Grass">Grass</option>
          <option value="Carpet">Carpet</option>
          <option value="Concrete">Concrete</option>
        </select>
      </td>
      <td><input type="number" class="bounces-input" placeholder="Enter bounces"></td>
      <td><button type="button" class="delete-row-btn" onclick="deleteRow(this)" title="Delete row">&times;</button></td>
    `;
    tableBody.appendChild(newRow);
  };

  window.deleteRow = function(btn) {
    const row = btn.closest('tr');
    if (row) row.remove();
  };

  // Chart.js initialization (only if graphCanvas exists)
  document.addEventListener('DOMContentLoaded', function() {
    const canvas = document.getElementById('graphCanvas');
    if (!canvas) return;
    const ctx = canvas.getContext('2d');
    window.chart = new Chart(ctx, {
      type: 'line',
      data: {
        datasets: [] // Will be filled dynamically
      },
      options: {
        responsive: true,
        plugins: {
          legend: { display: true }
        },
        scales: {
          x: {
            type: 'linear', // <-- Add this line!
            title: {
              display: true,
              text: 'Pressure'
            },
            min: 0,
            max: 10,
            grid: {
              color: 'rgba(100,150,255,0.3)', // pale blue grid lines
              lineWidth: 1,
              drawOnChartArea: true,
              drawTicks: true
            },
            ticks: {
              stepSize: 1,
              callback: function(value) {
                if (value === 2) return 'Soft';
                if (value === 7) return 'Hard';
                return '';
              }
            }
          },
          y: {
            title: {
              display: true,
              text: 'Number of Bounces'
            },
            beginAtZero: true,
            min: 0,
            max: 14,
            ticks: {
              stepSize: 1
            },
            grid: {
              color: 'rgba(100,150,255,0.3)',
              lineWidth: 1,
              drawOnChartArea: true,
              drawTicks: true
            }
          }
        }
      }
    });

    window.updateGraph = function() {
      const categories = ["A", "B"];
      const categoryLabels = {
        "A": "Soft",
        "B": "Hard",
      };
      const pressureToX = { "A": 2, "B": 7 }; // Map input to x values
      const surfaces = ["Hard Floor", "Astroturf", "Grass", "Carpet", "Concrete"];
      const surfaceColors = {
        "Hard Floor": "blue",
        "Astroturf": "green",
        "Grass": "lime",
        "Carpet": "orange",
        "Concrete": "gray"
      };

      const pressureInputs = document.querySelectorAll('.pressure-input');
      const surfaceInputs = document.querySelectorAll('.surface-input');
      const bouncesInputs = document.querySelectorAll('.bounces-input');

      // Prepare data structure: surface -> [{x, y}]
      const surfaceData = {};
      surfaces.forEach(surface => {
        surfaceData[surface] = [];
      });

      // Track which surfaces are actually used
      const usedSurfaces = new Set();

      pressureInputs.forEach((input, index) => {
        const pressure = input.value;
        const surface = surfaceInputs[index].value;
        const bounce = parseFloat(bouncesInputs[index].value);
        if (categories.includes(pressure) && surfaces.includes(surface) && !isNaN(bounce)) {
          surfaceData[surface].push({ x: pressureToX[pressure], y: bounce });
          usedSurfaces.add(surface);
        }
      });

      // Build datasets only for used surfaces
      const datasets = Array.from(usedSurfaces).map(surface => {
        // Average y for each x (2 and 7)
        const pointsByX = { 2: [], 7: [] };
        surfaceData[surface].forEach(pt => {
          if (pt.x === 2 || pt.x === 7) pointsByX[pt.x].push(pt.y);
        });
        const data = [];
        [2, 7].forEach(xVal => {
          if (pointsByX[xVal].length > 0) {
            const avg = pointsByX[xVal].reduce((a, b) => a + b, 0) / pointsByX[xVal].length;
            data.push({ x: xVal, y: avg });
          }
        });
        return {
          label: surface,
          data: data,
          borderColor: surfaceColors[surface],
          backgroundColor: surfaceColors[surface],
          borderWidth: 2,
          spanGaps: true,
          fill: false,
          showLine: true,
          pointRadius: 5
        };
      });

      window.chart.data.datasets = datasets;
      window.chart.update();
    };
  });
</script>
</body>
</html>