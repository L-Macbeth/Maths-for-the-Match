<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Bounce Experiment</title>
  <link rel="stylesheet" href="style.css">
  <script src="script.js" defer></script> <!-- Link to JavaScript for interactivity -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="timer.js"></script>
</head>
<body>
  <header>
    <nav>
      <a href="index.html">Home</a>
      <a href="usefullinks.html">Useful Links</a>
      <a href="experiment.html">Experiment</a>
      <a href="contact.html">Contact</a>
    </nav>
  </header>

  <!-- Progress Stripe and Football Icon -->
  <div id="progress-stripe">
    <img id="football-icon" src="football-icon.png" alt="Football Icon">
  </div>

  <!-- Start Button below header, top left -->
  <button id="page-start-btn">Start Session</button>

  <!-- Football Clock -->
  <div id="football-clock">
    <svg width="60" height="60" viewBox="0 0 60 60">
      <circle cx="30" cy="30" r="28" stroke="#e63946" stroke-width="4" fill="#fff"/>
      <image href="football-icon.png" x="10" y="10" width="40" height="40"/>
      <text id="clock-time" x="30" y="38" text-anchor="middle" font-size="18" fill="#333" font-family="Arial">00:00</text>
    </svg>
  </div>

  <!-- Timer Panel Section -->
  <div id="timer-panel">
    <h3>Session Timer</h3>
    <div id="timer-step-list"></div>
    <div id="timer-controls">
      <button id="timer-prev">Previous</button>
      <button id="timer-start">Start</button>
      <button id="timer-pause">Pause</button>
      <button id="timer-next">Next</button>
    </div>
    <div id="timer-current">
      <h4 id="timer-label"></h4>
      <p id="timer-desc"></p>
      <div id="timer-display">00:00</div>
    </div>
  </div>

  <main>
    <section id="introduction">
      <div class="section-header">
        <h2>Introduction (5 min)</h2>
        <div class="section-clock">
          <svg width="60" height="60" viewBox="0 0 60 60">
            <circle cx="30" cy="30" r="28" stroke="#e63946" stroke-width="4" fill="#fff"/>
            <image href="football-icon.png" x="10" y="10" width="40" height="40"/>
            <text class="clock-time" x="30" y="38" text-anchor="middle" font-size="18" fill="#333" font-family="Arial">00:00</text>
          </svg>
        </div>
      </div>
      <p>This section introduces the experiment and provides context.</p>
      <img src="intro-image.jpg" alt="Introduction Image" />
    </section>

    <section id="experiment-video">
      <h2>Experiment Video (2 min)</h2>
      <!-- Experiment Video -->
      <iframe src="https://www.youtube.com/embed/aFSdq4it8xg" title="Experiment Outline Video" allowfullscreen></iframe>
    </section>

    <section id="experiment-outline">
      <h2>Experiment Outline (0 min)</h2>
      <p>Follow the steps below to conduct the experiment.</p>
    </section>

    <!-- Active Experiment - Part 1 -->
    <section id="active-experiment-1">
      <h2>Active Experiment - Part 1 (3 min)</h2>
      <!-- Instructions for part 1 -->
    </section>

    <!-- Swap Balls -->
    <section id="swap-balls-1">
      <h2>Swap Balls (0 min)</h2>
      <!-- Swap balls instructions or cue -->
    </section>

    <!-- Active Experiment - Part 2 -->
    <section id="active-experiment-2">
      <h2>Active Experiment - Part 2 (3 min)</h2>
      <!-- Instructions for part 2 -->
    </section>

    <!-- Return Balls --> 
    <section id="return-balls">
      <h2>Return Balls (1 min)</h2>
      <!-- Return balls instructions -->
    </section>

    <!-- Graph Plotting (3m) -->
    <section id="graph-plotting">
      <h2>Graph Plotting (3 min)</h2>
      <!-- Graph plotting instructions and graph/table here -->
      <h3>Data Table</h3>
      <table id="data-table">
          <thead>
              <tr>
                  <th>Football Inflation</th>
                  <th>Surface</th>
                  <th>Number of Bounces</th>
                  <th></th>
              </tr>
          </thead>
          <tbody>
              <tr>
                <td>
                  <select class="pressure-input">
                    <option value="A">A: Soft</option>
                    <option value="B">B: Medium</option>
                    <option value="C">C: Hard</option>
                  </select>
                </td>
                <td>
                  <select class="surface-input">
                    <option value="Hard Floor">Hard Floor</option>
                    <option value="Astroturf">Astroturf</option>
                    <option value="Grass">Grass</option>
                    <option value="Carpet">Carpet</option>
                    <option value="Concrete">Concrete</option>
                  </select>
                </td>
                <td><input type="number" class="bounces-input" placeholder="Enter bounces"></td>
                <td><button type="button" class="delete-row-btn" onclick="deleteRow(this)" title="Delete row">&times;</button></td>
              </tr>
              <!-- Add more rows as needed -->
          </tbody>
      </table>
      <button onclick="addRow()">Add Row</button>
      <button onclick="updateGraph()">Update Graph</button>

      <!-- Graph -->
      <h3>Graph</h3>
      <canvas id="graphCanvas" width="600" height="400"></canvas>
    </section>

    <!-- Discussion Questions -->
    <section id="discussion-questions">
      <h2>Discussion Questions (4 min)</h2>
      <!-- Discussion questions here -->
    </section>

    <section id="show-graph-discussion">
      <h2>Show Graph & Discussion (5 min)</h2>
      <!-- Show graph and group discussion here -->
    </section>

    <!-- Theory Outline Section -->
    <section id="theory-outline">
      <h2>Theory Outline</h2>
      <iframe src="https://www.youtube.com/embed/example-theory-video" title="Theory Outline Video" allowfullscreen></iframe>
      <button onclick="toggleDropdown('script-theory')">Show Script</button>
      <div id="script-theory" class="dropdown-content" style="display: none;">
        <p>This is the script for the theory video.</p>
      </div>
      <p>Here is a description of the theory with diagrams and animations:</p>
      <img src="theory-diagram.jpg" alt="Theory Diagram" />
    </section>

    <!-- Discussion Questions -->
    <section id="conclusions-questions">
      <h2>Questions and Conclusions</h2>
      <div>
        <p>How does the inflation of the ball effect the number of bounces? Which ball would be best to score a penalty with?</p>
        <button onclick="toggleDropdown('answer1')">Show Answer</button>
        <div id="answer1" class="dropdown-content" style="display: none;">
          <p>We found that the less air a ball has inside it, the fewer times it bounces. 
            This is because a ball with less air is softer and changes shape more easily, which means it loses more energy when it hits the ground.
            We also noticed that there’s a big difference in how the ball bounces when it goes from no air to some air. 
            But when you go from a medium amount of air to a lot of air, the difference in bounces isn’t as big.
            If you were trying to score a penalty, the best ball to use would be the one with the most air in it. 
            This is because a harder ball doesn’t change shape as much, so more of the energy from your kick goes into making the ball move forward instead of being lost.</p>
        </div>
      </div>
      <div>
        <p>Sketch what happens to the ball when it hits the ground. Why do you think this happens?</p>
        <button onclick="toggleDropdown('answer2')">Show Answer</button>
        <div id="answer2" class="dropdown-content" style="display: none;">
          <img src="BouncingPhysics.svg" alt="Diagram describing the motion of the bouncing ball." style="max-width: 100%; height: auto;">
        </div>
      </div>
      <div>
        <p>Why do you think the surface changes how much the ball bounces? What surface do you think the team should play on?</p>
        <button onclick="toggleDropdown('answer3')">Show Answer</button>
        <div id="answer3" class="dropdown-content" style="display: none;">
          <p>The surface changes how much the ball bounces because a softer surface absorbs more energy from the ball when it hits the ground. 
            This means that less energy is available to make the ball bounce back up. 
            The team should play on a harder surface, like the changing room floor, because it will give the ball more bounce and help them score more goals.</p>
        </div>
      </div>
      <div>
        <p>What would happen if you threw the ball?</p>
        <button onclick="toggleDropdown('answer4')">Show Answer</button>
        <div id="answer4" class="dropdown-content" style="display: none;">
          <p>Throwing the ball would give the ball more energy, we would expect it to bounce higher and for longer. 
            This is why having more energy in a kick is important for a footballer.</p>
        </div>
      </div>

      <!-- Interview video and script -->
      <div>
        <iframe src="https://www.youtube.com/embed/YOUR_INTERVIEW_VIDEO_ID" title="Interview Video" allowfullscreen></iframe>
        <button onclick="toggleDropdown('script-interview')">Show Script</button>
        <div id="script-interview" class="dropdown-content" style="display: none;">
          <p>Look, the team left everything out there today. They worked incredibly hard to gather this data, and in the end, that effort really paid off. 
            What we’ve found is that there’s definitely a relationship between the ball’s pressure and how many times it bounces. On top of that, the surface it hits also plays a huge role in how the ball behaves.

          Think of it like this: when we drop the ball onto a hard surface, it starts with gravitational potential energy – just from being held up. 
          As soon as you let it go, gravity takes over, and that energy shifts to kinetic energy because the ball is now moving.

          Then, you’ve got the first impact. The ball hits the ground and deforms slightly – that’s where we see some of that kinetic energy converting into elastic potential energy. 
          The ball compresses, wants to snap back to shape, and that’s when the rebound happens. Not all of the energy makes it into that bounce though – some of it is lost as sound (which we hear), some as heat, and some goes into permanently deforming the ball – which is why, over time, balls wear out.

          Now as the ball comes back up, it's working against gravity again, and eventually it’ll come back down for another bounce. 
          But it won’t bounce forever – energy losses to heat, sound, and deformation mean each bounce is a little lower.

          When you switch to a softer surface, the story changes. 
          The ground deforms as well, meaning more energy is absorbed, and the ball doesn’t bounce as much. 
          Same goes for a ball with lower pressure – it deforms more easily, so again, fewer bounces.

          It’s a great insight for the squad – not just about physics, but about the importance of pressure and conditions. 
          We’ll definitely be taking this into account moving forward.</p>
      </div>
    </section>

    <!-- Conclusions Section -->
    <section id="conclusions">
      <h2>Conclusions</h2>
      <iframe src="https://www.youtube.com/embed/example-conclusion-video" title="Conclusions Video" allowfullscreen></iframe>
      <button onclick="toggleDropdown('script-conclusion')">Show Script</button>
      <div id="script-conclusion" class="dropdown-content" style="display: none;">
        <p>This is the script for the conclusions video.</p>
      </div>
    </section>
  </main>
  <footer>
    <p>&copy; 2025 Robins Foundation Outreach</p>
  </footer>

  <script>
    // JavaScript function to toggle dropdown visibility
    function toggleDropdown(id) {
      const element = document.getElementById(id);
      element.style.display = element.style.display === 'none' ? 'block' : 'none';
    }
    
    // Function to add a new row to the data table
    function addRow() {
      const tableBody = document.querySelector('#data-table tbody');
      const newRow = document.createElement('tr');
      newRow.innerHTML = `
        <td>
          <select class="pressure-input">
            <option value="A">A: Soft</option>
            <option value="B">B: Medium</option>
            <option value="C">C: Hard</option>
          </select>
        </td>
        <td>
          <select class="surface-input">
            <option value="Hard Floor">Hard Floor</option>
            <option value="Astroturf">Astroturf</option>
            <option value="Grass">Grass</option>
            <option value="Carpet">Carpet</option>
            <option value="Concrete">Concrete</option>
          </select>
        </td>
        <td><input type="number" class="bounces-input" placeholder="Enter bounces"></td>
        <td><button type="button" class="delete-row-btn" onclick="deleteRow(this)" title="Delete row">&times;</button></td>
      `;
      tableBody.appendChild(newRow);
    }
    
    // Function to delete a row from the data table
    function deleteRow(btn) {
      const row = btn.closest('tr');
      row.remove();
    }
    
    // Initialize the Chart.js graph
    const ctx = document.getElementById('graphCanvas').getContext('2d');
    const chart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: ["Soft", "Medium", "Hard"], // X-axis: Pressure
        datasets: [] // Will be filled dynamically
      },
      options: {
        responsive: true,
        plugins: {
          legend: {
            display: true,
            position: 'top'
          }
        },
        scales: {
          x: {
            title: {
              display: true,
              text: 'Pressure'
            }
          },
          y: {
            title: {
              display: true,
              text: 'Number of Bounces'
            },
            beginAtZero: true
          }
        }
      }
    });

    const sectionIds = [
  "introduction",
  "experiment-video",
  "experiment-outline",
  "active-experiment-1",
  "swap-balls-1",
  "active-experiment-2",
  "swap-balls-2",
  "return-balls",
  "graph-plotting",
  "discussion-questions",
  "show-graph-discussion"
];

// Move football to the section with the given index
function moveFootballToSection(index) {
  const icon = document.getElementById('football-icon');
  const section = document.getElementById(sectionIds[index]);
  if (icon && section) {
    const rect = section.getBoundingClientRect();
    const scrollTop = window.scrollY || document.documentElement.scrollTop;
    // Place icon at the top of the section, offset for icon height
    const top = rect.top + scrollTop + 8; // 8px padding from section top
    icon.style.top = `${top}px`;
  }
}

// Example: click to advance the football (for demo/testing)
let currentSection = 0;
moveFootballToSection(currentSection);

document.body.addEventListener('keydown', function(e) {
  if (e.key === 'ArrowDown') {
    currentSection = Math.min(currentSection + 1, sectionIds.length - 1);
    moveFootballToSection(currentSection);
  }
  if (e.key === 'ArrowUp') {
    currentSection = Math.max(currentSection - 1, 0);
    moveFootballToSection(currentSection);
  }
});

// Optionally, add buttons or integrate with your timer to call moveFootballToSection(index)

document.getElementById('timer-start').onclick = function() {
  // Start or resume timer logic here
  if (window.timer && typeof window.timer.start === 'function') window.timer.start();
};
document.getElementById('timer-next').onclick = function() {
  // Move to next section logic here
  if (window.timer && typeof window.timer.next === 'function') window.timer.next();
};
document.getElementById('timer-restart').onclick = function() {
  // Restart timer/session logic here
  if (window.timer && typeof window.timer.selectStep === 'function') window.timer.selectStep(0);
};
  </script>
</body>
</html>